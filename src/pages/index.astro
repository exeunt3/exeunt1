---
import Base from "../layouts/Base.astro";
const all = await Astro.glob('../content/essays/*.md');
const essays = all
  .filter(p => !p.frontmatter.draft)
  .sort((a,b) => new Date(b.frontmatter.date) - new Date(a.frontmatter.date));
---
<Base title="Exeunt â€” Open Transmissions">
  <h1 class="hero-title">Open Transmissions</h1>
  <p class="intro">Essays and fragments by Exeunt. A quiet index with clean cards, uniform banner crops, and serif typesetting.</p>

  <section class="essay-list">
    {essays.map(({url, frontmatter}) => (
      <article class="card">
        <div class="thumb">
          {frontmatter.banner && <img src={frontmatter.banner} alt="" loading="lazy" />}
        </div>
        <div class="meta">
          <div class="date">{new Date(frontmatter.date).toLocaleDateString(undefined, { year:'numeric', month:'short', day:'numeric' })}</div>
          <h2 class="title"><a href={url}>{frontmatter.title}</a></h2>
          {frontmatter.summary && <div class="summary">{frontmatter.summary}</div>}
        </div>
      </article>
    ))}
  </section>
</Base>
